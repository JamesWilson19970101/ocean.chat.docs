<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-devdocs/Authorization" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Permission System Design Considerations | Oceanchat-devdocs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://JamesWilson19970101.github.io/ocean.chat.docs/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://JamesWilson19970101.github.io/ocean.chat.docs/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://JamesWilson19970101.github.io/ocean.chat.docs/docs/devdocs/Authorization"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="zh_CN"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Permission System Design Considerations | Oceanchat-devdocs"><meta data-rh="true" name="description" content="For permission design, I am not adopting a separate, centralized permission service. Instead, I follow a more pragmatic design principle: The sole owner of the data is the sole party responsible for permission decisions (Policy Decision Point, PDP)."><meta data-rh="true" property="og:description" content="For permission design, I am not adopting a separate, centralized permission service. Instead, I follow a more pragmatic design principle: The sole owner of the data is the sole party responsible for permission decisions (Policy Decision Point, PDP)."><link data-rh="true" rel="icon" href="/ocean.chat.docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://JamesWilson19970101.github.io/ocean.chat.docs/docs/devdocs/Authorization"><link data-rh="true" rel="alternate" href="https://JamesWilson19970101.github.io/ocean.chat.docs/docs/devdocs/Authorization" hreflang="en"><link data-rh="true" rel="alternate" href="https://JamesWilson19970101.github.io/ocean.chat.docs/zh-CN/docs/devdocs/Authorization" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://JamesWilson19970101.github.io/ocean.chat.docs/docs/devdocs/Authorization" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/ocean.chat.docs/blog/rss.xml" title="Oceanchat-devdocs RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/ocean.chat.docs/blog/atom.xml" title="Oceanchat-devdocs Atom Feed"><link rel="stylesheet" href="/ocean.chat.docs/assets/css/styles.9dcc5b86.css">
<script src="/ocean.chat.docs/assets/js/runtime~main.dc2def55.js" defer="defer"></script>
<script src="/ocean.chat.docs/assets/js/main.aa34ef60.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/ocean.chat.docs/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/ocean.chat.docs/"><div class="navbar__logo"><img src="/ocean.chat.docs/img/logo.svg" alt="oceanchat Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/ocean.chat.docs/img/logo.svg" alt="oceanchat Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Ocean Chat</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/ocean.chat.docs/docs/intro">Tutorial</a><a class="navbar__item navbar__link" href="/ocean.chat.docs/blog">Blog</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/ocean.chat.docs/docs/devdocs/Authorization" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/ocean.chat.docs/zh-CN/docs/devdocs/Authorization" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-CN">简体中文</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://github.com/JamesWilson19970101" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/ocean.chat.docs/docs/intro">OceanChat Intro</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/ocean.chat.docs/docs/category/oceanchat---userdocs">oceanchat - userdocs</a><button aria-label="Expand sidebar category &#x27;oceanchat - userdocs&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/ocean.chat.docs/docs/category/oceanchat---devdocs">oceanchat - devdocs</a><button aria-label="Collapse sidebar category &#x27;oceanchat - devdocs&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ocean.chat.docs/docs/devdocs/manage-docs-versions">Manage Docs Versions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ocean.chat.docs/docs/devdocs/translate-your-site">Translate your site</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ocean.chat.docs/docs/devdocs/Auth Service">Auth Service</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/ocean.chat.docs/docs/devdocs/Authorization">Permission System Design Considerations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ocean.chat.docs/docs/devdocs/JWT">JWT Hybrid Authentication</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ocean.chat.docs/docs/devdocs/cache">cache issues</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ocean.chat.docs/docs/devdocs/concurrency considerations">concurrency considerations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ocean.chat.docs/docs/devdocs/file structure">file structure</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ocean.chat.docs/docs/devdocs/graphql vs http in oceanchat">graphql vs http in oceanchat</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ocean.chat.docs/docs/devdocs/microservice">Microservice Architecture</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/ocean.chat.docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/ocean.chat.docs/docs/category/oceanchat---devdocs"><span itemprop="name">oceanchat - devdocs</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Permission System Design Considerations</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Permission System Design Considerations</h1></header>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Core Principle: Whoever Owns the Data, Makes the Decision</div><div class="admonitionContent_BuS1"><p>For permission design, I am not adopting a separate, centralized permission service. Instead, I follow a more pragmatic design principle: <strong>The sole owner of the data is the sole party responsible for permission decisions (Policy Decision Point, PDP)</strong>.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="approach-1-a-centralized-independent-permission-service">Approach 1: A Centralized, Independent Permission Service<a href="#approach-1-a-centralized-independent-permission-service" class="hash-link" aria-label="Direct link to Approach 1: A Centralized, Independent Permission Service" title="Direct link to Approach 1: A Centralized, Independent Permission Service">​</a></h2>
<p>A common approach is to extract permission logic (e.g., &quot;determine if Role A has Permission X&quot;) into an independent oceanchat-permission service. In theory, this approach has several advantages:</p>
<ul>
<li><strong>Highly Centralized Logic:</strong> All permission rules are concentrated in one place, making it very simple to modify and audit policies.</li>
<li><strong>Decoupling of Business Services:</strong> The MessageService or GroupService no longer needs to care about complex permission logic. They only need to ask the permission service, &quot;Can User U perform Action A on Resource R?&quot; and then proceed based on the &quot;yes/no&quot; answer, leading to cleaner business code.</li>
<li><strong>Single Responsibility:</strong> The permission service only makes authorization decisions, giving it a very pure responsibility.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-practical-challenges-of-a-centralized-permission-service">The Practical Challenges of a Centralized Permission Service<a href="#the-practical-challenges-of-a-centralized-permission-service" class="hash-link" aria-label="Direct link to The Practical Challenges of a Centralized Permission Service" title="Direct link to The Practical Challenges of a Centralized Permission Service">​</a></h2>
<p>Although the model of an independent permission service is elegant in theory, it faces two major challenges in practice, especially in a system like oceanchat that requires a large amount of contextual data for decision-making.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-network-overhead-and-performance-bottlenecks">1. Network Overhead and Performance Bottlenecks<a href="#1-network-overhead-and-performance-bottlenecks" class="hash-link" aria-label="Direct link to 1. Network Overhead and Performance Bottlenecks" title="Direct link to 1. Network Overhead and Performance Bottlenecks">​</a></h3>
<p>Treating a permission check as a network call (RPC/HTTP) significantly increases request latency. More critically, the permission service becomes a key single point of failure for the entire system. If it fails or its performance degrades, all services that rely on it for permission checks (especially write operations) could be blocked.</p>
<!-- -->
<p>The diagram above shows that a simple request to send a message results in multiple internal network communications because of the introduction of a centralized permission service.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-data-dependency-and-service-coupling">2. Data Dependency and Service Coupling<a href="#2-data-dependency-and-service-coupling" class="hash-link" aria-label="Direct link to 2. Data Dependency and Service Coupling" title="Direct link to 2. Data Dependency and Service Coupling">​</a></h3>
<p>Permission decisions are often not stateless; they are highly dependent on specific business data.</p>
<blockquote>
<p><strong>Scenario 1: Can User A send a message in Group G?</strong></p>
<ul>
<li><strong>Data Needed:</strong> Is A a member of Group G? Has A been muted? Is Group G currently in a &quot;mute-all&quot; state?</li>
<li>*<em>Data Owner:</em> All of this data is stored in the database of the Group Service (oceanchat-group).</li>
</ul>
</blockquote>
<blockquote>
<p><strong>Scenario 2: Can User A remove their friendship with User B?</strong></p>
<ul>
<li><strong>Data Needed:</strong> Are A and B friends?</li>
<li><strong>Data Owner:</strong> This data is stored in the database of the User Relationship Service (oceanchat-user).</li>
</ul>
</blockquote>
<p>For an independent permission service to make these decisions, it only has two options, both of which have serious flaws:</p>
<ul>
<li>
<p><strong>Option A: Reverse-Calling Data Services</strong>
To make a decision, the permission service needs to call back to the GroupService and UserRelationshipService to fetch the required data. This leads to a complex and fragile service call chain (e.g., MessageService -&gt; PermissionService -&gt; GroupService), which not only increases latency but also raises the risk of circular dependencies in the system.</p>
</li>
<li>
<p><strong>Option B: Synchronizing Data to the Permission Service</strong>
The permission service maintains its own copy of the data required for decisions (such as group memberships, friend relationships, etc.). This introduces extremely high complexity related to data synchronization and eventual consistency.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="my-design-decentralized-decisions">My Design: Decentralized Decisions<a href="#my-design-decentralized-decisions" class="hash-link" aria-label="Direct link to My Design: Decentralized Decisions" title="Direct link to My Design: Decentralized Decisions">​</a></h2>
<p>Based on the challenges above, I decided to adopt a more pragmatic and efficient model: <strong>let the service that owns the data become the Policy Decision Point itself.</strong>。</p>
<p>This means that the logic for permission checks will be tightly co-located with the data it depends on.</p>
<p>Here is the implementation plan:</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-decentralizing-the-decision-logic">1. Decentralizing the Decision Logic<a href="#1-decentralizing-the-decision-logic" class="hash-link" aria-label="Direct link to 1. Decentralizing the Decision Logic" title="Direct link to 1. Decentralizing the Decision Logic">​</a></h3>
<p>Delegate the responsibility for permission decisions to the services that own the relevant data.</p>
<ul>
<li><strong>Group-related Permissions:</strong> All permission-checking logic related to groups (e.g., sending messages, inviting members, muting) is encapsulated within the GroupService. When the MessageService needs to check a user&#x27;s permissions in a group, it directly calls an interface provided by the GroupService, such as groupService.checkPermission(userId, groupId, &#x27;SEND_MESSAGE&#x27;).</li>
<li><strong>User Relationship Permissions:</strong> Similarly, permission checks for adding/removing friends are handled by the UserRelationshipService.</li>
</ul>
<p><strong>The advantages of this model are clear:</strong></p>
<ul>
<li><strong>High Performance:</strong> Permission decisions are made within the same service that holds the required data, avoiding extra network overhead.</li>
<li><strong>High Cohesion:</strong> The data and the logic that uses it are encapsulated together, which aligns with good software design principles.</li>
<li><strong>High Availability:</strong> It eliminates the single point of failure risk associated with a centralized permission service.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-centralizing-permission-metadata">2. Centralizing Permission Metadata<a href="#2-centralizing-permission-metadata" class="hash-link" aria-label="Direct link to 2. Centralizing Permission Metadata" title="Direct link to 2. Centralizing Permission Metadata">​</a></h3>
<p>Although the decision logic is decentralized, the &quot;definitions&quot; of permissions must be centralized and consistent.</p>
<p>I will create a shared internal library (e.g., common-defs) where all platform-wide &quot;Roles&quot; and &quot;Permission&quot; identifiers are uniformly defined using Enums or Constants.</p>
<p>For example:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// In the shared library common-defs</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">enum</span><span class="token plain"> GroupPermission </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token constant" style="color:#36acaa">SEND_MESSAGE</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;group:send_message&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token constant" style="color:#36acaa">INVITE_USER</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;group:invite_user&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// ... other permissions</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>All services will depend on this shared library to reference permission definitions, ensuring that the entire system has a consistent understanding of what each permission means.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/ocean.chat.docs/docs/devdocs/Auth Service"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Auth Service</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/ocean.chat.docs/docs/devdocs/JWT"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">JWT Hybrid Authentication</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#approach-1-a-centralized-independent-permission-service" class="table-of-contents__link toc-highlight">Approach 1: A Centralized, Independent Permission Service</a></li><li><a href="#the-practical-challenges-of-a-centralized-permission-service" class="table-of-contents__link toc-highlight">The Practical Challenges of a Centralized Permission Service</a><ul><li><a href="#1-network-overhead-and-performance-bottlenecks" class="table-of-contents__link toc-highlight">1. Network Overhead and Performance Bottlenecks</a></li><li><a href="#2-data-dependency-and-service-coupling" class="table-of-contents__link toc-highlight">2. Data Dependency and Service Coupling</a></li></ul></li><li><a href="#my-design-decentralized-decisions" class="table-of-contents__link toc-highlight">My Design: Decentralized Decisions</a><ul><li><a href="#1-decentralizing-the-decision-logic" class="table-of-contents__link toc-highlight">1. Decentralizing the Decision Logic</a></li><li><a href="#2-centralizing-permission-metadata" class="table-of-contents__link toc-highlight">2. Centralizing Permission Metadata</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/ocean.chat.docs/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://x.com/OceanChat" target="_blank" rel="noopener noreferrer" class="footer__link-item">X<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/ocean.chat.docs/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/JamesWilson19970101" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Ocean Chat, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>