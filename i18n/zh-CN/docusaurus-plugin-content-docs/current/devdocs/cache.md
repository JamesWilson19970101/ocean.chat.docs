# 缓存

## 多级缓存

本地内存缓存(L1) + Redis 等分布式缓存(L2) 应用场景：

1. 用户在线状态

这是最需要多级缓存的地方，几乎没有之一。

L1 (本地内存)：每台 IM 服务器都在自己的内存中缓存当前连接到本机的所有用户的状态和路由信息。当服务器 A 上的用户要给服务器 B 上的用户发消息时，服务器 A 会优先在自己内存里查找。

L2 (Redis)：Redis 中存储了全网所有在线用户的状态和路由信息。
